<!DOCTYPE html>
<html>
<body>
<h1>This is my testing Web Messaging host page v001</h1>
<p>I'm hosted with GitHub Pages.</p>
</body>

<script>
    function toggleMessenger() {
        const deploymentId = '86d50ece-2f54-41e1-9965-006bb5386d1d';
        let session = JSON.parse(localStorage.getItem(`_${deploymentId}:gcmcsessionActive`))
        
        console.log(document.getElementById('fname').value);

        Genesys(
        'command',
        'Messenger.open',
        {},
        function (o) {
        Genesys('command', 'Database.set', {
            messaging: {
            customAttributes: {
                firstName: document.getElementById('fname').value,
                lastName: document.getElementById('lname').value,
                email: document.getElementById('email').value,
                case: document.getElementById('case').value,
                queueName: document.getElementById('queue').value,
            },
            },
        })
        },
        function (o) {
        Genesys('command', 'Messenger.close')
        }
    )
    }

    let fnameL = document.createElement('label');
    let fnameI = document.createElement('input');
    let lnameL = document.createElement('label');
    let lnameI = document.createElement('input');
    let emailL = document.createElement('label');
    let emailI = document.createElement('input');
    let caseL = document.createElement('label');
    let caseI = document.createElement('input');
    let queueL = document.createElement('label');
    let queueS = document.createElement('select');
    let option1 = document.createElement('option');
    let option2 = document.createElement('option');
    let option3 = document.createElement('option');
    let submit = document.createElement('button');

    fnameL.innerText = 'First Name';
    fnameI.id = 'fname';
    fnameI.placeholder = 'Your first name..';
    lnameL.innerText = 'Last Name';
    lnameI.id = 'lname';
    lnameI.placeholder = 'Your last name..';
    emailL.innerText = 'Email';
    emailI.id = 'email';
    emailI.placeholder = 'Your email address..';
    caseL.innerText = 'Case';
    caseI.id = 'case';
    caseI.placeholder = 'Optional case number..';
    queueL.innerText = 'Queue';
    queueS.id = 'queue';

    submit.type=submit;
    submit.innerHTML="Submit";
  
    option1.value = 'sales';
    option1.innerText = 'Sales';
    option2.value = 'support';
    option2.innerText = 'Support';
    option3.value = 'general';
    option3.innerText = 'General';

    queueS.appendChild(option1);
    queueS.appendChild(option2);
    queueS.appendChild(option3);
    document.body.appendChild(fnameL);
    document.body.appendChild(fnameI);
    document.body.appendChild(lnameL);
    document.body.appendChild(lnameI);
    document.body.appendChild(emailL);
    document.body.appendChild(emailI);
    document.body.appendChild(caseL);
    document.body.appendChild(caseI);
    document.body.appendChild(queueL);
    document.body.appendChild(queueS);
    document.body.appendChild(submit);
   
    submit.onclick = function() {
        toggleMessenger()
    }
</script>



<script type="text/javascript" charset="utf-8">
    (function (g, e, n, es, ys) {
      g['_genesysJs'] = e;
      g[e] = g[e] || function () {
        (g[e].q = g[e].q || []).push(arguments)
      };
      g[e].t = 1 * new Date();
      g[e].c = es;
      ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
    })(window, 'Genesys', 'https://apps.mypurecloud.jp/genesys-bootstrap/genesys.min.js', {
      environment: 'apne1',
      deploymentId: '86d50ece-2f54-41e1-9965-006bb5386d1d'
    });
  </script>



</html>